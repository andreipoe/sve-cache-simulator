# SVE Cache Simulator

[![pipeline status](https://gitlab.com/phd-repos/sve-cache-simulator/badges/master/pipeline.svg)](https://gitlab.com/phd-repos/sve-cache-simulator/-/commits/master)


## Build

### Using Make

```bash
make COMPILER=...
```

Compilers available: `ARM`, `CLANG` (default), `CRAY`, `GNU`, `INTEL`.

You can specify additional options by setting `ARCH`, `CXX_<compiler>`, `CXXFLAGS_<compiler>`, and `LDFLAGS_<compiler>`.

### Using Meson

Requirements:

* [Meson](https://mesonbuild.com/Quick-guide.html) (`pip3 install --user meson`)
* Ninja

The default configuration builds with optimisations enabled:

```bash
env CXX=g++ meson build-gnu
cd build-gnu
ninja
```

The single `ninja` invocation builds both the main executable and the tests wrapper, placing both in the build directory.

To build a debug (`-Og -g3`) build:

```bash
env CXX=g++ meson --buildtype=debug build-debug-gnu
cd build-gnu
ninja
```

Only GNU and Clang have been tested, but Arm and Intel, and possibly Cray, should also work.

## Run

```bash
scs trace.log
```

### Tests

Tests are implemented using Catch2, and the tests executable is the one generated by the library.

```bash
make test
scs-test
```
